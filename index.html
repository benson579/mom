<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‚…è™¹ FU HONG - æ—…éŠåç‰‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #0F172A; }
        .brand-bg { background: linear-gradient(135deg, #2c3e50 0%, #3498DB 100%); }
    </style>
    <!-- å…¨åŸŸéŒ¯èª¤æ””æˆªå™¨ -->
    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            const errorDiv = document.getElementById('debugInfo');
            if (errorDiv) {
                errorDiv.style.display = 'block';
                errorDiv.innerText = "ç³»çµ±éŒ¯èª¤: " + message + "\nè¡Œæ•¸: " + lineno;
            }
            const ui = document.getElementById('errorUI');
            const det = document.getElementById('errorDetail');
            if(ui && det) {
                ui.classList.remove('hidden');
                document.getElementById('statusUI').classList.add('hidden');
                det.innerText = "ç¨‹å¼åŸ·è¡ŒéŒ¯èª¤: " + message;
            }
        };
    </script>
</head>
<body class="min-h-screen flex items-center justify-center p-6 text-center text-white">

    <div class="max-w-xs w-full">
        <!-- ç‹€æ…‹é¡¯ç¤º -->
        <div id="statusUI">
            <div class="w-12 h-12 border-4 border-[#3498DB] border-t-transparent rounded-full animate-spin mx-auto mb-6"></div>
            <h1 class="text-xl font-bold mb-2 tracking-wide">åç‰‡æº–å‚™ä¸­</h1>
            <p id="statusDesc" class="text-gray-400 text-sm">æ­£åœ¨å–šé†’é˜¿è™¹çš„åç‰‡...</p>
        </div>

        <!-- æ‰‹å‹•ç™¼é€æŒ‰éˆ• -->
        <div id="manualUI" class="hidden">
            <div class="w-16 h-16 brand-bg rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-2xl">
                <i class="fas fa-paper-plane text-white text-2xl"></i>
            </div>
            <h1 class="text-xl font-bold mb-2">åç‰‡å·²å°±ç·’</h1>
            <p class="text-gray-400 text-xs mb-8">é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹åˆ†äº«</p>
            <button onclick="sendAhongCard()" class="w-full py-4 brand-bg text-white rounded-2xl font-black text-lg active:scale-95 transition-all shadow-lg hover:shadow-blue-500/20">
                ç™¼é€åç‰‡
            </button>
        </div>

        <!-- éŒ¯èª¤ UI -->
        <div id="errorUI" class="hidden">
            <div class="bg-red-500/10 border border-red-500/50 p-6 rounded-3xl text-left">
                <h1 class="text-red-400 font-bold mb-2 text-center">ç™¼ç”ŸéŒ¯èª¤</h1>
                <p id="errorDetail" class="text-gray-300 text-xs break-all font-mono mb-4"></p>
                <div id="envInfo" class="text-[10px] text-gray-500 border-t border-gray-700 pt-2 font-mono"></div>
                <button onclick="window.location.reload()" class="w-full mt-4 py-2 bg-white/10 rounded text-xs uppercase hover:bg-white/20">é‡æ–°è¼‰å…¥</button>
            </div>
        </div>
        
        <!-- é è¦½å€ -->
        <div class="mt-8 bg-white rounded-xl overflow-hidden w-full max-w-[300px] mx-auto text-left shadow-lg">
            <!-- åœ–ç‰‡ -->
            <div class="relative w-full h-44">
                <img src="https://i.postimg.cc/2StGJdPr/8DBF6C7B-90B7-491F-8CFB-B5156FD87732.jpg" class="w-full h-full object-cover" style="object-position: top;">
            </div>
            <!-- å…§å®¹ -->
            <div class="p-4">
                <h2 class="text-[#2c3e50] font-bold text-xl leading-tight">å‚…è™¹ FU HONG</h2>
                
                <div class="flex items-center gap-2 mt-3">
                    <span class="text-[#3498DB] font-bold text-sm flex-1">å…¨æ–¹ä½æ—…éŠ x ç”Ÿæ´»é¸ç‰©</span>
                    <span class="bg-[#FFF0E0] text-[#E67E22] text-[10px] font-bold px-2 py-1 rounded">20å¹´è³‡æ­·</span>
                </div>

                <div class="w-full border-t border-gray-100 my-3"></div>

                <!-- åˆ—è¡¨çœç•¥ -->
                <div class="space-y-2 text-xs mb-4">
                    <div class="flex items-center gap-2"><span>âœˆï¸</span><p class="text-[#2c3e50] font-bold">ä½³å£«å¤šæ—…è¡Œç¤¾</p></div>
                    <div class="flex items-center gap-2"><span>ğŸš©</span><p class="text-[#2c3e50] font-bold">å±±å¯Œæ—…è¡Œç¤¾</p></div>
                </div>

                <!-- æŒ‰éˆ•é è¦½ -->
                <div class="grid grid-cols-2 gap-2">
                    <a href="#" class="col-span-1 bg-[#06C755] text-white font-bold py-2 rounded text-xs text-center">è«®è©¢è¡Œç¨‹</a>
                    <a href="#" class="col-span-1 bg-[#1877F2] text-white font-bold py-2 rounded text-xs text-center">é€›é€›åœ˜è³¼</a>
                    <!-- ä¿®æ­£ï¼šç§»é™¤é›»è©±åœ–ç¤ºï¼Œåªç•™æ–‡å­— -->
                    <a href="tel:0975373007" class="col-span-2 bg-[#2c3e50] text-white font-bold py-2 rounded text-xs text-center">ç›´æ¥è¯ç¹«æˆ‘</a>
                    <!-- åˆ†äº«æŒ‰éˆ• -->
                    <a href="#" class="col-span-2 bg-[#F1F3F4] text-gray-500 font-bold py-2 rounded text-xs text-center">åˆ†äº«åç‰‡çµ¦å¥½å‹</a>
                </div>
            </div>
            <div class="bg-gray-50 p-2 text-center text-[10px] text-gray-400">
                (é è¦½ç•«é¢)
            </div>
        </div>
        
        <div id="debugInfo" style="display:none; position:fixed; bottom:0; left:0; width:100%; background:rgba(0,0,0,0.9); color:red; font-size:10px; padding:10px; text-align:left; z-index:9999;"></div>
    </div>

    <script>
        const MY_LIFF_ID = "2008788337-c00C9UGS"; 
        const shareUrl = "https://liff.line.me/" + MY_LIFF_ID;

        // ã€æœ€çµ‚ä¿®æ­£ç‰ˆ JSONã€‘
        const ahongJson = {
          "type": "bubble",
          "hero": {
            "type": "image",
            "url": "https://i.postimg.cc/2StGJdPr/8DBF6C7B-90B7-491F-8CFB-B5156FD87732.jpg",
            "size": "full",
            "aspectRatio": "20:13",
            "aspectMode": "cover",
            "action": { "type": "uri", "uri": "https://line.me/ti/p/FaXuuoOYal" }
          },
          "body": {
            "type": "box",
            "layout": "vertical",
            "contents": [
              // 1. ä¸»æ¨™é¡Œ
              {
                "type": "text", "text": "å‚…è™¹ FU HONG", "weight": "bold", "size": "xl", "color": "#2c3e50"
              },
              
              // 3. æ¨™ç±¤èˆ‡è³‡æ­·
              {
                "type": "box", "layout": "horizontal", "margin": "md", "alignItems": "center",
                "contents": [
                  { "type": "text", "text": "å…¨æ–¹ä½æ—…éŠ x ç”Ÿæ´»é¸ç‰©", "weight": "bold", "size": "sm", "color": "#3498DB", "flex": 1 },
                  {
                    "type": "box", "layout": "vertical", "flex": 0, "backgroundColor": "#FFF0E0", "cornerRadius": "sm", "paddingAll": "xs",
                    "contents": [
                        { "type": "text", "text": "20å¹´è³‡æ­·", "size": "xxs", "color": "#E67E22", "weight": "bold" }
                    ]
                  }
                ]
              },
              // 4. åˆ†éš”ç·š
              { "type": "separator", "margin": "lg" },
              
              // 5. åˆ—è¡¨å€å¡Š
              {
                "type": "box", "layout": "vertical", "margin": "lg", "spacing": "sm",
                "contents": [
                  // ç¬¬ä¸€é …ï¼šä½³å£«å¤š
                  {
                    "type": "box", "layout": "horizontal", "spacing": "md", "alignItems": "center",
                    "contents": [
                      { "type": "text", "text": "âœˆï¸", "size": "sm", "flex": 0 },
                      {
                        "type": "box", "layout": "vertical", "flex": 1,
                        "contents": [
                          { "type": "text", "text": "ä½³å£«å¤šæ—…è¡Œç¤¾", "size": "xxs", "color": "#aaaaaa", "weight": "bold" },
                          { "type": "text", "text": "æ¥­å‹™ç¸½ç›£", "size": "sm", "color": "#2c3e50", "weight": "bold", "wrap": true }
                        ]
                      }
                    ]
                  },
                  // ç¬¬äºŒé …ï¼šå±±å¯Œ
                  {
                    "type": "box", "layout": "horizontal", "spacing": "md", "alignItems": "center", "margin": "sm",
                    "contents": [
                      { "type": "text", "text": "ğŸš©", "size": "sm", "flex": 0 },
                      {
                        "type": "box", "layout": "vertical", "flex": 1,
                        "contents": [
                          { "type": "text", "text": "å±±å¯Œæ—…è¡Œç¤¾", "size": "xxs", "color": "#aaaaaa", "weight": "bold" },
                          { "type": "text", "text": "è³‡æ·±é ˜éšŠå°éŠ", "size": "sm", "color": "#2c3e50", "weight": "bold", "wrap": true }
                        ]
                      }
                    ]
                  },
                  // ç¬¬ä¸‰é …ï¼šæ„›æ—…éŠ
                  {
                    "type": "box", "layout": "horizontal", "spacing": "md", "alignItems": "center", "margin": "sm",
                    "contents": [
                      { "type": "text", "text": "ğŸ¤", "size": "sm", "flex": 0 },
                      {
                        "type": "box", "layout": "vertical", "flex": 1,
                        "contents": [
                          { "type": "text", "text": "æ„›æ—…éŠ (ä¸­éƒ¨å¤¥ä¼´)", "size": "xxs", "color": "#aaaaaa", "weight": "bold" },
                          { "type": "text", "text": "å®¢è£½åŒ–è¡Œç¨‹è¦åŠƒå°ˆå®¶", "size": "sm", "color": "#2c3e50", "weight": "bold", "wrap": true }
                        ]
                      }
                    ]
                  },
                  // ç¬¬å››é …ï¼šåœ˜è³¼
                  {
                    "type": "box", "layout": "horizontal", "spacing": "md", "alignItems": "center", "margin": "sm",
                    "contents": [
                      { "type": "text", "text": "ğŸ›ï¸", "size": "sm", "flex": 0 },
                      {
                        "type": "box", "layout": "vertical", "flex": 1,
                        "contents": [
                          { "type": "text", "text": "ç”Ÿæ´»é¸ç‰©", "size": "xxs", "color": "#aaaaaa", "weight": "bold" },
                          { "type": "text", "text": "ç™¾è¬åœ˜è³¼ä¸»", "size": "sm", "color": "#2c3e50", "weight": "bold", "wrap": true }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "footer": {
            "type": "box", "layout": "vertical", "spacing": "sm",
            "contents": [
              {
                "type": "box", "layout": "horizontal", "spacing": "sm",
                "contents": [
                  {
                    "type": "button", "style": "primary", "height": "sm",
                    "action": { "type": "uri", "label": "è«®è©¢è¡Œç¨‹", "uri": "https://line.me/ti/p/FaXuuoOYal" },
                    "color": "#06C755", "flex": 1
                  },
                  {
                    "type": "button", "style": "primary", "height": "sm",
                    "action": { "type": "uri", "label": "é€›é€›åœ˜è³¼", "uri": "https://www.facebook.com/share/g/1HAzjYUzNg/?mibextid=wwXIfr" },
                    "color": "#1877F2", "flex": 1
                  }
                ]
              },
              // ä¿®æ­£ï¼šç§»é™¤é›»è©±åœ–ç¤ºï¼Œåªä¿ç•™æ–‡å­—
              {
                "type": "button", "style": "primary", "height": "sm",
                "action": { "type": "uri", "label": "ç›´æ¥è¯ç¹«æˆ‘", "uri": "tel:0975373007" },
                "color": "#2c3e50"
              },
              {
                "type": "button", "style": "secondary", "height": "sm",
                "action": { "type": "uri", "label": "åˆ†äº«åç‰‡çµ¦å¥½å‹", "uri": shareUrl },
                "color": "#F1F3F4"
              }
            ]
          }
        };

        // UI åˆ‡æ›æ§åˆ¶
        function showUI(id, msg = "") {
            document.getElementById('statusUI').classList.add('hidden');
            document.getElementById('manualUI').classList.add('hidden');
            document.getElementById('errorUI').classList.add('hidden');
            if(id === 'errorUI') {
                document.getElementById('errorDetail').innerText = msg;
                let env = "Env: ";
                try { env += liff.getOS() + " / " + liff.getLanguage() + " / " + liff.getVersion(); } catch(e){}
                document.getElementById('envInfo').innerText = env;
            }
            document.getElementById(id).classList.remove('hidden');
        }

        async function sendAhongCard() {
            try {
                if (!liff.isLoggedIn()) {
                    liff.login();
                    return;
                }

                const res = await liff.shareTargetPicker([
                    {
                        "type": "flex",
                        "altText": "é€™æ˜¯é˜¿è™¹çš„å°ˆå±¬åç‰‡ï¼Œæ¨è–¦çµ¦æ‚¨ï¼",
                        "contents": ahongJson
                    }
                ]);
                
                if (res) { 
                    liff.closeWindow(); 
                } else { 
                    showUI('manualUI'); 
                }
            } catch (err) {
                console.error(err);
                const code = err.code || "Unknown";
                const message = err.message || JSON.stringify(err);
                showUI('errorUI', `[${code}] ${message}`);
            }
        }

        async function main() {
            try {
                await liff.init({ liffId: MY_LIFF_ID });
                // ç‚ºäº†é¿å…ç€è¦½å™¨é˜»æ“‹ï¼Œç›´æ¥é€²å…¥æ‰‹å‹•æ¨¡å¼
                showUI('manualUI');
            } catch (err) {
                showUI('errorUI', "LIFF Init Error: " + err.message);
            }
        }
        
        window.onload = main;
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
</body>
</html>